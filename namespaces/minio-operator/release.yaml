apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: operator
spec:
  releaseName: operator
  targetNamespace: minio-operator
  interval: 2m
  chart:
    spec:
      chart: operator
      version: 6.0.1
      sourceRef:
        kind: HelmRepository
        name: minio-operator
  install:
    remediation:
      retries: 3
  upgrade:
    cleanupOnFail: true
    remediation:
      retries: 3
  uninstall:
    keepHistory: false
  values:
---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: tenant
spec:
  releaseName: tenant
  targetNamespace: minio
  interval: 2m
  chart:
    spec:
      chart: tenant
      version: 6.0.1
      sourceRef:
        kind: HelmRepository
        name: minio
  install:
    remediation:
      retries: 3
  upgrade:
    cleanupOnFail: true
    remediation:
      retries: 3
  uninstall:
    keepHistory: false
  values:
    secrets:
      enabled: true
      name: minio-secret
      accessKey: minio
      secretKey: quickstart
    tenant:
      name: quickstart
      configuration:
        name: minio-secret
      image:
        repository: minio/minio
        tag: RELEASE.2023-06-16T02-41-06Z
        pullPolicy: IfNotPresent
      pools:
        - servers: 1
          volumesPerServer: 4
          name: "quickstart"
          size: 2Gi
          #storageClassName: ebs-sc
      buckets:
        - name: "timescape"
      certificate:
        requestAutoCert: false
      kes:
        configuration: false
      log:
        disabled: true
      prometheus:
        disabled: true